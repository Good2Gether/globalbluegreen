<!DOCTYPE html>
<html>
  <head>
    <script src="js/jquery-3.6.0.min.js"></script>

    <script src="js/bowser.js"></script>

    <script src="dist/jspsych.js"></script>
    <script src="dist/plugin-html-keyboard-response.js"></script>
    <script src="dist/plugin-html-button-response.js"></script>
    <script src="dist/plugin-call-function.js"></script>
    <script src="dist/plugin-webgazer-init-camera.js"></script>
    <script src="dist/plugin-webgazer-calibrate.js"></script>
    <script src="dist/plugin-webgazer-validate.js"></script>
    <script src="js/webgazer/webgazer.js"></script>
    <script src="dist/plugin-survey-text.js"></script>
    <script src="dist/plugin-fullscreen.js"></script>
    <script src="dist/extension-webgazer.js"></script>
    <link rel="stylesheet" href="dist/jspsych.css" />
    
    <!-- <link href="css/" rel="stylesheet" type="text/css"></link> -->
    <link href="css/binary-choice.css" rel="stylesheet" type="text/css">  </link>

    <script src="js/stimuli_data.js"></script>
    
    <!-- <script src="js/binary-choice-table.js"></script> -->
    <script src="js/binary-choice-table-four.js"></script>
    <script src="js/svo-survey-multi-choice.js"></script>
    <script src="js/svo-survey-likert.js"></script>
    <script src="../src/main.js"></script>
    <style>
      .jspsych-content {
        max-width: 100%;
      }
    </style>
  </head>
  <body>
    <div
    style="background-color: white;color:black; padding-bottom: 50px; padding-left: 50px;padding-right: 50px; padding-top: 50px; font-size: larger; font-family:Arial, Helvetica, sans-serif">
    <h2>Consent Comes here: <br> <br>  <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br></h2>
    
    <p style="text-align: center;"></p>
    <div style="text-align:right;">
        <input type="checkbox" class="checkmark">
        I <b>AGREE</b> with the above consent.
        <br><br><br>
        <button class="goExp" style="font-size: larger;">
            Continue
        </button>
    </div>
</div>
  </body>
  <script>
    // startExp();
    const goExp = document.querySelector(".goExp");

    function showAlert() {
        alert("Please check the checkbox to continue.");
    }


    $('body').on('click', '.goExp', function () {
      if ($('.checkmark').is(":checked"))
      {
        ensureWebcam(() => startExp());
      // startExp();
      }else{
        showAlert();
      }
        
    });

    function ensureWebcam(callback) {
        $('body').html('<p class="center", style="font-family:Arial, Helvetica, sans-serif">Checking webcam ...</p>');
        window.navigator.mediaDevices.getUserMedia({ video: true })
        .then(function(stream) {
            stream.getTracks().forEach(track => track.stop());
            callback();
        })
        .catch(function() {
            alert('Cannot open webcam.\nIs it blocked? This app requires webcam.');
            location.reload();
        });
    }
    
  </script>
</html>
